v {xschem version=3.4.8RC file_version=1.2}
G {}
K {}
V {}
S {}
F {}
E {}
B 2 2340 240 3140 640 {flags=graph
y1=1.1
y2=1.2
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=-44.605425
x2=130.3946
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node=vbg
dataset=-1
unitx=1
logx=0
logy=0
color=12}
N 1450 180 1700 180 {lab=vdd}
N 1700 180 1700 250 {lab=vdd}
N 1450 180 1450 250 {lab=vdd}
N 1520 450 1660 450 {lab=vb}
N 1700 330 1700 420 {lab=#net1}
N 1440 250 1450 250 {lab=vdd}
N 1700 280 1710 280 {lab=vdd}
N 1710 250 1710 280 {lab=vdd}
N 1700 250 1710 250 {lab=vdd}
N 1700 450 1740 450 {lab=vss}
N 1450 580 1450 610 {lab=#net2}
N 1380 450 1450 450 {lab=vss}
N 340 620 340 650 {lab=GND}
N 270 620 270 650 {lab=GND}
N 270 530 270 560 {lab=vdd}
N 340 530 340 560 {lab=vss}
N 340 530 350 530 {lab=vss}
N 1440 250 1440 280 {lab=vdd}
N 1440 280 1450 280 {lab=vdd}
N 1630 280 1660 280 {lab=#net1}
N 1450 380 1450 420 {lab=vb}
N 1630 280 1630 330 {lab=#net1}
N 1510 280 1630 280 {lab=#net1}
N 1630 330 1700 330 {lab=#net1}
N 1700 310 1700 330 {lab=#net1}
N 1450 380 1520 380 {lab=vb}
N 1450 310 1450 380 {lab=vb}
N 1520 380 1520 450 {lab=vb}
N 1490 450 1520 450 {lab=vb}
N 1380 450 1380 700 {lab=vss}
N 1400 640 1410 640 {lab=#net2}
N 1400 580 1400 640 {lab=#net2}
N 1400 580 1450 580 {lab=#net2}
N 1450 480 1450 580 {lab=#net2}
N 1450 670 1450 700 {lab=vss}
N 1380 700 1450 700 {lab=vss}
N 1450 640 1470 640 {lab=vss}
N 1470 640 1470 700 {lab=vss}
N 1450 700 1470 700 {lab=vss}
N 1740 450 1740 700 {lab=vss}
N 1720 700 1740 700 {lab=vss}
N 1700 520 1800 520 {lab=vt}
N 1700 480 1700 520 {lab=vt}
N 1700 580 1700 610 {lab=#net3}
N 1650 640 1660 640 {lab=#net3}
N 1650 580 1650 640 {lab=#net3}
N 1650 580 1700 580 {lab=#net3}
N 1700 640 1720 640 {lab=vss}
N 1720 640 1720 700 {lab=vss}
N 1700 700 1720 700 {lab=vss}
N 1700 670 1700 700 {lab=vss}
N 1470 700 1700 700 {lab=vss}
N 1700 330 1960 330 {lab=#net1}
N 1960 280 1960 330 {lab=#net1}
N 1960 280 2020 280 {lab=#net1}
N 1700 180 2060 180 {lab=vdd}
N 2060 240 2060 250 {lab=vdd}
N 2060 280 2070 280 {lab=vdd}
N 2070 240 2070 280 {lab=vdd}
N 2060 240 2070 240 {lab=vdd}
N 2060 180 2060 240 {lab=vdd}
N 2060 560 2060 590 {lab=#net4}
N 2010 620 2020 620 {lab=#net4}
N 2010 560 2010 620 {lab=#net4}
N 2010 560 2060 560 {lab=#net4}
N 2060 620 2080 620 {lab=vss}
N 2060 650 2060 700 {lab=vss}
N 1740 700 2060 700 {lab=vss}
N 2080 620 2080 700 {lab=vss}
N 2060 700 2080 700 {lab=vss}
N 2060 520 2060 560 {lab=#net4}
N 2060 400 2060 460 {lab=vbg}
N 2060 400 2180 400 {lab=vbg}
N 2060 310 2060 400 {lab=vbg}
N 920 210 920 250 {lab=#net5}
N 960 280 990 280 {lab=#net1}
N 990 180 990 280 {lab=#net1}
N 960 180 990 180 {lab=#net1}
N 1020 280 1340 280 {lab=#net1}
N 1020 320 1020 330 {lab=#net1}
N 990 280 1020 280 {lab=#net1}
N 920 360 980 360 {lab=#net6}
N 920 310 920 360 {lab=#net6}
N 920 430 920 450 {lab=#net6}
N 920 540 920 560 {lab=#net7}
N 920 430 970 430 {lab=#net6}
N 920 360 920 430 {lab=#net6}
N 970 430 970 480 {lab=#net6}
N 960 480 970 480 {lab=#net6}
N 920 540 970 540 {lab=#net7}
N 920 510 920 540 {lab=#net7}
N 970 540 970 590 {lab=#net7}
N 960 590 970 590 {lab=#net7}
N 920 620 920 650 {lab=GND}
N 1340 280 1340 340 {lab=#net1}
N 1340 340 1510 340 {lab=#net1}
N 1510 280 1510 340 {lab=#net1}
N 1490 280 1510 280 {lab=#net1}
N 1020 390 1020 420 {lab=vb}
N 1020 420 1130 420 {lab=vb}
N 1520 380 1630 380 {lab=vb}
N 1450 100 1450 180 {lab=vdd}
N 920 100 920 150 {lab=vdd}
N 910 180 920 180 {lab=vdd}
N 910 100 910 180 {lab=vdd}
N 920 100 1450 100 {lab=vdd}
N 910 100 920 100 {lab=vdd}
N 910 280 920 280 {lab=vdd}
N 910 180 910 280 {lab=vdd}
N 1020 360 1030 360 {lab=#net1}
N 1030 320 1030 360 {lab=#net1}
N 1020 320 1030 320 {lab=#net1}
N 1020 280 1020 320 {lab=#net1}
N 910 590 920 590 {lab=GND}
N 910 590 910 620 {lab=GND}
N 910 620 920 620 {lab=GND}
N 910 480 910 590 {lab=GND}
N 910 480 920 480 {lab=GND}
C {simulator_commands_shown.sym} 230 230 0 0 {name=SimulatorNGSPICE
simulator=ngspice
only_toplevel=false 
value="
.include bgr_cmos.save

.control
save all
op
write bgr_cmos.raw
set appendwrite

dc TEMP -50 125 5
*tran 1m 2
write bgr_cmos.raw
.endc
"
}
C {sg13g2_pr/sg13_lv_pmos.sym} 1470 280 0 1 {name=M1
l=2u
w=5u
ng=1
m=3
model=sg13_lv_pmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_pmos.sym} 1680 280 0 0 {name=M2
l=2u
w=5u
ng=1
m=3
model=sg13_lv_pmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_nmos.sym} 1680 450 0 0 {name=M3
l=3u
w=2.5u
ng=1
m=1
model=sg13_lv_nmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_nmos.sym} 1470 450 0 1 {name=M4
l=3u
w=2.5u
ng=1
m=1
model=sg13_lv_nmos
spiceprefix=X
}
C {lab_pin.sym} 1570 180 1 0 {name=p1 sig_type=std_logic lab=vdd}
C {vsource.sym} 270 590 0 0 {name=V1 value="1.8" savecurrent=false}
C {vsource.sym} 340 590 0 0 {name=V2 value=0 savecurrent=false}
C {gnd.sym} 270 650 0 0 {name=l1 lab=GND}
C {gnd.sym} 340 650 0 0 {name=l2 lab=GND}
C {lab_pin.sym} 270 530 1 0 {name=p4 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 347.505404697594 530 1 0 {name=p5 sig_type=std_logic lab=vss}
C {sg13g2_pr/annotate_fet_params.sym} 1250 180 0 0 {name=annot1 ref=M1}
C {sg13g2_pr/annotate_fet_params.sym} 1790 160 0 0 {name=annot2 ref=M2}
C {sg13g2_pr/annotate_fet_params.sym} 1230 400 0 0 {name=annot4 ref=M4}
C {lab_pin.sym} 1562.494595302406 700 3 0 {name=p2 sig_type=std_logic lab=vss}
C {sg13g2_pr/annotate_fet_params.sym} 1850 440 0 0 {name=annot3 ref=M3}
C {sg13g2_pr/sg13_lv_nmos.sym} 1430 640 0 0 {name=M5
l=3u
w=2.5u
ng=1
m=1
model=sg13_lv_nmos
spiceprefix=X
}
C {sg13g2_pr/annotate_fet_params.sym} 1220 570 0 0 {name=annot5 ref=M5}
C {res.sym} 1700 550 0 0 {name=R1
value=4k
footprint=1206
device=resistor
m=1}
C {lab_pin.sym} 1792.494595302406 520 3 0 {name=p3 sig_type=std_logic lab=vt}
C {sg13g2_pr/sg13_lv_nmos.sym} 1680 640 0 0 {name=M6
l=3u
w=10u
ng=1
m=1
model=sg13_lv_nmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_pmos.sym} 2040 280 0 0 {name=M7
l=2u
w=5u
ng=1
m=3
model=sg13_lv_pmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_nmos.sym} 2040 620 0 0 {name=M8
l=3u
w=2.5u
ng=1
m=1
model=sg13_lv_nmos
spiceprefix=X
}
C {res.sym} 2060 490 0 0 {name=R2
value=8k
footprint=1206
device=resistor
m=1}
C {lab_pin.sym} 2172.494595302406 400 3 0 {name=p6 sig_type=std_logic lab=vbg}
C {sg13g2_pr/annotate_fet_params.sym} 2150 200 0 0 {name=annot6 ref=M7}
C {sg13g2_pr/annotate_fet_params.sym} 2170 600 0 0 {name=annot7 ref=M8}
C {sg13g2_pr/annotate_fet_params.sym} 1730 730 0 0 {name=annot8 ref=M6}
C {devices/code_shown.sym} 2700 806.171875 0 0 {name=NGSPICE only_toplevel=false 
value="
.control
  let run = 1
  let mc_runs = 200
  set curplot = new
  set scratch = $curplot
  dowhile run <= mc_runs
    reset
    dc temp 126 -50 -5
    set run = $&run
    set dc = $curplot
    setplot $scratch
    let off\{$run\} = \{$dc\}.v(vbg)
    let mytemp\{$run\} = \\"\{$dc\}.temp-sweep\\"
    setplot $dc
    let run = run + 1
  end
  set nolegend
  plot \{$scratch\}.allv vs \{$scratch\}.mytemp1
  write bandgap_testbench_mc_mis.raw \{$scratch\}.allv \{$scratch\}.mytemp1
.endc

"
spice_ignore=true}
C {devices/code_shown.sym} 2190 795 0 0 {name=MODEL only_toplevel=true
format="tcleval( @value )"
value="
.lib $::SG13G2_MODELS/cornerCAP.lib cap_typ
.lib $::SG13G2_MODELS/cornerRES.lib res_typ
.lib cornerMOSlv.lib mos_tt_mismatch
"
spice_ignore=true}
C {simulator_commands_shown.sym} 210 60 0 0 {
name=Libs_Ngspice
simulator=ngspice
only_toplevel=false
value="
.lib cornerMOSlv.lib mos_tt
.lib cornerMOShv.lib mos_tt
.lib cornerHBT.lib hbt_typ
.lib cornerRES.lib res_typ
"
      }
C {sg13g2_pr/sg13_lv_pmos.sym} 940 180 0 1 {name=M9
l=1u
w=2u
ng=1
m=1
model=sg13_lv_pmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_pmos.sym} 940 280 0 1 {name=M10
l=1u
w=2u
ng=1
m=1
model=sg13_lv_pmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_pmos.sym} 1000 360 0 0 {name=M11
l=1u
w=2u
ng=1
m=2
model=sg13_lv_pmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_nmos.sym} 940 480 0 1 {name=M12
l=5u
w=1u
ng=1
m=1
model=sg13_lv_nmos
spiceprefix=X
}
C {sg13g2_pr/sg13_lv_nmos.sym} 940 590 0 1 {name=M13
l=5u
w=1u
ng=1
m=1
model=sg13_lv_nmos
spiceprefix=X
}
C {gnd.sym} 920 650 0 0 {name=l3 lab=GND}
C {lab_pin.sym} 1130 420 2 0 {name=p7 sig_type=std_logic lab=vb}
C {lab_pin.sym} 1630 380 2 0 {name=p8 sig_type=std_logic lab=vb}
C {sg13g2_pr/annotate_fet_params.sym} 660 70 0 0 {name=annot9 ref=M9}
C {sg13g2_pr/annotate_fet_params.sym} 640 220 0 0 {name=annot10 ref=M10}
C {sg13g2_pr/annotate_fet_params.sym} 630 350 0 0 {name=annot11 ref=M11}
C {sg13g2_pr/annotate_fet_params.sym} 640 490 0 0 {name=annot12 ref=M12}
C {sg13g2_pr/annotate_fet_params.sym} 650 650 0 0 {name=annot13 ref=M13}
